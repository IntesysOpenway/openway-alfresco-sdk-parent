<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

	<modelVersion>4.0.0</modelVersion>

	<groupId>it.iopenway</groupId>
	<artifactId>openway-alfresco-sdk-parent</artifactId>
	<version>5.1.6.10-SNAPSHOT</version>
	<packaging>pom</packaging>

	<name>OpenWay Alfresco SDK parent</name>
	<description>Base di sviluppo per un progetto Openway Alfresco basato su Alfresco Maven SDK</description>

	<organization>
		<name>Intesys Openway Srl</name>
		<url>http://www.iopenway.it/</url>
	</organization>

	<properties>

		<!-- Alfresco Maven Plugin version to use -->
		<alfresco.sdk.version>3.0.0</alfresco.sdk.version>

		<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>

		<!-- Properties used in dependency declarations, you don't need to change these -->
		<alfresco.groupId>org.alfresco</alfresco.groupId>

		<alfresco.platform.version>5.1.g</alfresco.platform.version>
		<alfresco.share.version>5.1.f</alfresco.share.version>

		<!-- Default is to run with a Community edition, change to 'enterprise' if using Enterprise edition -->
		<maven.alfresco.edition>community</maven.alfresco.edition>

		<!-- JRebel Hot reloading of classpath stuff and web resource stuff -->
		<jrebel.version>1.1.6</jrebel.version>

		<!-- Compile with Java 7, default is 5 -->
		<maven.compiler.source>1.7</maven.compiler.source>
		<maven.compiler.target>1.7</maven.compiler.target>

	</properties>

	<scm>
		<!-- URL to GIT folder that contains this pom -->
		<developerConnection>scm:git:git@gitlab.intesys.it:openway/openway-alfresco-sdk-parent.git</developerConnection>
		<tag>HEAD</tag>
	</scm>

	<distributionManagement>
		<snapshotRepository>
			<id>iopenway</id>
			<url>http://172.28.13.245:8080/nexus/content/repositories/snapshots/</url>
		</snapshotRepository>
		<repository>
			<id>iopenway</id>
			<url>http://172.28.13.245:8080/nexus/content/repositories/releases/</url>
		</repository>
	</distributionManagement>

	<build>
	</build>

	<profiles>
		<!-- Profilo attivato ogni volta che la property obfuscate=true. I sorgenti vengono offuscati con proguard. -->
		<profile>
			<id>iopenway-obfuscate-profile</id>
			<activation>
				<property>
					<name>obfuscate</name>
					<value>true</value>
				</property>
			</activation>
			<build>
				<pluginManagement>
					<plugins>
						<!-- In caso di offuscamento faccio pescare le classi compilate nella cartella dove sono gia' state offuscate. -->
						<plugin>
							<groupId>org.alfresco.maven.plugin</groupId>
							<artifactId>alfresco-maven-plugin</artifactId>
							<extensions>true</extensions>
							<configuration combine.children="append">
								<classesDirectory>${project.build.directory}/classes-ob</classesDirectory>
							</configuration>
						</plugin>
					</plugins>
				</pluginManagement>
				<plugins>
					<plugin>
						<groupId>com.github.wvengen</groupId>
						<artifactId>proguard-maven-plugin</artifactId>
						<executions>
							<execution>
								<phase>compile</phase>
								<goals>
									<goal>proguard</goal>
								</goals>
							</execution>
						</executions>
						<configuration>
							<options combine.children="append">
								<option>-injar ${project.build.directory}/classes/</option>
								<option>-outjar ${project.build.directory}/classes-ob/</option>
								<option>-renamesourcefileattribute SourceFile</option>
								<option>-keepparameternames</option>
								<option>-keepattributes
									Exceptions,InnerClasses,Signature,Deprecated,SourceFile,LineNumberTable,
									*Annotation*,EnclosingMethod,!LocalVariableTable,!LocalVariableTypeTable</option>
								<option>-keep public class * { public protected *;}</option>
								<!-- Preserve all getter and setter -->
								<option>-keep class * {
									void set*(***);
									void set*(int, ***);
									boolean is*();
									boolean is*(int);
									*** get*();
									*** get*(int);
									}</option>
								<!-- <option><![CDATA[-keep public class * { public protected *;}]]></option> -->
								<!-- Utile per javaDoc -->
								<option>-keepclassmembernames
									class * {
									java.lang.Class
									class$(java.lang.String);
									java.lang.Class
									class$(java.lang.String, boolean);}</option>
								<!-- Enumerazioni -->
								<option>-keepclassmembers
									enum * {
									public static **[] values();
									public static **
									valueOf(java.lang.String);}</option>
								<!-- Serializzazioni -->
								<option>-keepclassmembers
									class * implements java.io.Serializable
									{
									static final long serialVersionUID;
									private static final
									java.io.ObjectStreamField[]
									serialPersistentFields;
									private void
									writeObject(java.io.ObjectOutputStream);
									private void
									readObject(java.io.ObjectInputStream);
									java.lang.Object
									writeReplace();
									java.lang.Object readResolve();}</option>
							</options>
						</configuration>
					</plugin>
				</plugins>
			</build>
		</profile>
	</profiles>

	<modules>
		<module>openway-alfresco-sdk-platform</module>
		<module>openway-alfresco-sdk-share</module>
	</modules>
</project>